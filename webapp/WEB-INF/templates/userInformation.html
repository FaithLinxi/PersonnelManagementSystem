<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport"
	content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta charset="utf-8" />
<link rel="stylesheet"
	href="static/bootstrap-3.3.7-dist/css/bootstrap.min.css" />
<link rel="stylesheet"
	href="//at.alicdn.com/t/font_1648999_174564zlj3h.css" />
<link rel="stylesheet"
	href="//at.alicdn.com/t/font_1734273_31sxt8ndmzm.css" />
<link rel="stylesheet"
	href="//at.alicdn.com/t/font_1734287_1ftu2h7dods.css" />
<link rel="stylesheet"
	href="//at.alicdn.com/t/font_1734290_p41q9iecr1e.css" />
<link rel="stylesheet"
	href="//at.alicdn.com/t/font_1734296_t3khm3995gk.css" />
<link rel="stylesheet"
	href="//at.alicdn.com/t/font_1648998_zqaf20d4ezr.css" />
<link rel="stylesheet"
	href="//at.alicdn.com/t/font_1648999_174564zlj3h.css" />
<link rel="stylesheet"
	href="//at.alicdn.com/t/font_1649008_bc85s1qq2yf.css" />
<link rel="stylesheet"
	href="//at.alicdn.com/t/font_1649000_v7egkzifdjn.css" />
<title>个人信息中心-个人信息设置</title>
</head>
<style type="text/css">
body, html {
	height: 100%;
}

.container-fluid {
	margin: 0;
	padding: 0;
	/*height: 100%;*/
	background-color: #F4F6F8;
}

.navigation .breadcrumb {
	background-color: white;
	border: 1px solid #e7e7e7;
	border-radius: 0;
}

a:hover, a:visited, a:link, a:active {
	text-decoration: none;
}

table td:hover {
	background-color: #F5F5F5;
}

table th {
	text-align: center;
}

.img-td {
	position: relative;
	width: 150px;
	height: 160px;
}

.img-td img {
	position: absolute;
	width: 140px;
	height: 160px;
	left: 0;
	right: 0;
	top: 0;
	bottom: 0;
	margin: auto;
}

#img-file {
	position: absolute;
	display: inline-block;
	width: 100%;
	height: 100%;
	opacity: 0;
	z-index: 2;
}
</style>

<body>
	<!-- 新增工作经历模态框 -->
	<div class="modal fade" tabindex="-1" role="dialog" id="add_work_modal">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">
						<span class="iconfont icon-gongzuojingli"></span>新增工作经历
					</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" id="add_work_form">
						<div class="form-group">
							<label class="col-sm-2 control-label">工作单位</label>
							<div class="col-sm-10">
								<input type="text" name="workCompany" required="required" class="form-control" placeholder="工作单位">
							</div>
						</div>
						<input type="hidden" name="empId" id="hidden_id"/>
						<div class="form-group">
							<label class="col-sm-2 control-label">部门</label>
							<div class="col-sm-10">
								<input type="text" name="dept" required="required" class="form-control" placeholder="部门">
							</div>
							
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">职位</label>
							<div class="col-sm-10">
								<input type="text" name="position" required="required" class="form-control" placeholder="职位">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">开始时间</label>
							<div class="col-sm-4">
								<input type="date" name="startTime" required="required" class="form-control">
							</div>
							<label class="col-sm-2 control-label">结束时间</label>
							<div class="col-sm-4">
								<input type="date" name="endTime" required="required" class="form-control">
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">
						<i class="iconfont icon-guanbi"></i>关闭
					</button>
					<button type="submit" class="btn btn-primary" form="add_work_form">
						<i class="iconfont icon-baocun"></i>保存
					</button>
				</div>
			</div>
		</div>
	</div>
	
	<!-- 编辑工作经历 -->
	<div class="modal fade" tabindex="-1" role="dialog" id="edit_work_modal">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">
						<span class="iconfont icon-xiugai" style="font-size: 20px"></span>修改工作经历
					</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" id="edit_work_form">
						<div class="form-group">
							<label class="col-sm-2 control-label">工作单位</label>
							<div class="col-sm-10">
								<input type="text" name="workCompany" class="form-control" placeholder="工作单位">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">部门</label>
							<div class="col-sm-10">
								<input type="text" name="dept" class="form-control" placeholder="部门">
							</div>
							
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">职位</label>
							<div class="col-sm-10">
								<input type="text" name="position" class="form-control" placeholder="职位">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">开始时间</label>
							<div class="col-sm-4">
								<input type="date" name="startTime" class="form-control">
							</div>
							<label class="col-sm-2 control-label">结束时间</label>
							<div class="col-sm-4">
								<input type="date" name="endTime" class="form-control">
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">
						<i class="iconfont icon-guanbi"></i>关闭
					</button>
					<button type="button" class="btn btn-primary" id="edit_work_btn">
						<i class="iconfont icon-bianji"></i>编辑
					</button>
				</div>
			</div>
		</div>
	</div>
	
	<div class="container-fluid">
		<!--面包屑导航-->
		<div class="navigation">
			<ol class="breadcrumb">
				<li><span>个人信息中心</span></li>
				<li class="active"><a href="userInformation.html">个人信息设置</a></li>
			</ol>
		</div>
		<!--面板-->
		<div class="panel panel-default">
			<div class="panel-heading text-center">
				<span class="iconfont icon-gerenxinxi"></span>我的个人信息
			</div>
			<div class="panel-body">
				<form class="form-horizontal" id="emp_info_form">
					<table class="table table-bordered">
						<tr>
							<td width="100px">用户名</td>
							<td width="200px" id="user_name"></td>
							<td width="100px">姓名</td>
							<td width="200px" id="emp_name"></td>
							<td width="100px">性别</td>
							<td width="150px" id="sex"></td>
							<td rowspan="4" class="img-td"><img src="" id="image" /> <input
								type="file" onchange="displayImg()" id="img-file" name=""
								accept="image/*" /></td>
						</tr>
						<tr>
							<td>员工编号</td>
							<td id="emp_number"></td>
							<td>出生日期</td>
							<td><input type="date" class="form-control"
								name="empBirthday" required="required" /></td>
							<td>年龄</td>
							<td><input type="number" class="form-control" name="empAge"
								placeholder="年龄" readonly="readonly" /></td>
						</tr>
						<tr>
							<td>联系电话</td>
							<td><input type="tel" class="form-control"
								placeholder="电话号码" name="empPhone" /></td>
							<td>邮箱</td>
							<td><input type="email" class="form-control" name="empEmail"
								placeholder="xxx@xx.com" required="required" /></td>
							<td>民族</td>
							<td id="nation"></td>
						</tr>
						<tr>
							<td>身份证号</td>
							<td><input type="text" name="empIdCard" class="form-control"
								placeholder="身份证号码" required="required" /></td>
							<td>家庭地址</td>
							<td colspan="3"><input class="form-control" type="text"
								name="empAddress" placeholder="xx省xx市xx街道..."
								required="required" /></td>
						</tr>
						<tr>
							<td>文化程度</td>
							<td><select class="form-control" id="culture_select"
								name="empCultureTypeId">
							</select></td>
							<td>毕业院校</td>
							<td><input class="form-control" name="empSchool" type="text"
								placeholder="院校" required="required" /></td>
							<td>主修专业</td>
							<td colspan="2"><input class="form-control" name="empMajor"
								type="text" placeholder="专业" required="required" /></td>
						</tr>
						<tr>
							<td>政治面貌</td>
							<td><select class="form-control" id="political_select"
								name="empPoliticalTypeId">
							</select></td>
							<td>入职时间</td>
							<td id="join_time"></td>
							<td>部门</td>
							<td colspan="2" id="dept"></td>
						</tr>
						<tr>
							<td>职位</td>
							<td id="position"></td>
							<td>备注</td>
							<td colspan="4"></td>
						</tr>
					</table>
					<input type="hidden" id="emp_id" />
				</form>
			</div>
			<div class="panel-footer" style="text-align: center;">
				<button type="submit" class="btn btn-primary" form="emp_info_form">
					<span class="iconfont icon-baocun"></span> 保存
				</button>
			</div>
		</div>
		<!--工作经历面板-->
		<div class="panel panel-default">
			<div class="panel-heading text-center">
				<span class="iconfont icon-gongzuojingli"></span>我的工作经历
			</div>
			<div class="panel-body" id="content">
				<table class="table table-hover text-center" id="work_experience">
					<thead>
						<button class="btn btn-primary pull-right" id="add_work_btn">
							<span class="glyphicon glyphicon-plus-sign"></span>新增
						</button>
						<tr>
							<th>序号</th>
							<th>工作单位</th>
							<th>部门</th>
							<th>职位</th>
							<th>开始时间</th>
							<th>结束时间</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
		</div>
		<!--工资记录面板-->
		<div class="panel panel-default">
			<div class="panel-heading text-center">
				<span class="iconfont icon-wodegongzi"></span>我的工资记录
			</div>
			<div class="panel-body" style="height: 300px">
				<table class="table table-hover text-center" id="payroll_records">
					<thead>
						<tr>
							<th>序号</th>
							<th>时间</th>
							<th>月工资</th>
							<th>绩效提成</th>
							<th>扣除</th>
							<th>实发工资</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
				<!--分页信息-->
				<div id="row">
					<!-- 分页文字信息 -->
					<div class="col-md-6" id="page_info_area"></div>
					<!-- 分页条信息 -->
					<div class="col-md-6">
						<nav aria-label="Page navigation" id="page_nav_area"></nav>
					</div>
				</div>
			</div>
		</div>
		<!--奖惩记录面板-->
		<div class="panel panel-default">
			<div class="panel-heading text-center">
				<span class="iconfont icon-faqijiangcheng"></span>我的奖惩记录
			</div>
			<div class="panel-body" style="height: 300px">
				<table class="table table-hover text-center" id="rewards_records">
					<thead>
						<tr>
							<th>序号</th>
							<th>奖惩类型</th>
							<th>奖惩时间</th>
							<th>批准人</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
				<!--分页信息-->
				<div id="row">
					<!-- 分页文字信息 -->
					<div class="col-md-6" id="info_area"></div>
					<!-- 分页条信息 -->
					<div class="col-md-6">
						<nav aria-label="Page navigation" id="nav_area"></nav>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/vue.js"></script>
	<script type="text/javascript"
		src="static/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		$(function() {
			get_emp_info("#culture_select", "getCultureName");
			get_emp_info("#political_select", "getPoliticalName");
			staffInfo();
			getEmpWorkInfo();
		});
		
		//通用查询类型方法
		function get_emp_info(ele, url) {
			$(ele).empty();
			$.get(url).then(
					function(res) {
						if (res.code === 200) {
							$.each(res.extend.info, function() {
								let optionEle = $("<option></option>").append(
										this.type_name).attr("value", this.id);
								optionEle.appendTo(ele);
							});
						}
					});
		}

		//员工信息
		function staffInfo() {
			$.get("getStaffInfo").then(function(res) {
				if (res.code === 200) {
					let empInfo = res.extend.staffInfo;
					$("#emp_id").val(empInfo.id);
					$("#user_name").text(empInfo.empUserName);
					$("#emp_name").text(empInfo.empName);
					$("#sex").text(empInfo.empSex);
					$("#image").attr("src", empInfo.empPhotoUrl);
					if ($("#image").attr("src") === undefined) {
						$("#image").attr("src", "upload/a11.png");
					}
					$("#emp_number").text(empInfo.empNumber);
					$("input[name=empBirthday]").val(empInfo.empBirthday);
					$("input[name=empAge]").val(empInfo.empAge);
					$("input[name=empPhone]").val(empInfo.empPhone);
					$("input[name=empEmail]").val(empInfo.empEmail);
					$("#nation").text(empInfo.empNationTypeId);
					$("input[name=empIdCard]").val(empInfo.empIdCard);
					$("input[name=empAddress]").val(empInfo.empAddress);
					$("#culture_select").val([ empInfo.empCultureTypeId ]);
					$("input[name=empSchool]").val(empInfo.empSchool);
					$("input[name=empMajor]").val(empInfo.empMajor);
					$("#political_select").val([ empInfo.empPoliticalTypeId ]);
					$("#join_time").text(empInfo.empJoinTime);
					$("#dept").text(empInfo.empDeptTypeId);
					$("#position").text(empInfo.empPositionTypeId);
				}
			});
		}

		//图片预览
		function displayImg() {
			let img = document.getElementById("image");
			let file = document.getElementById("img-file").files[0];
			let reader = new FileReader();
			reader.onload = function() {
				//result:返回文件的内容。只有在读取操作完成后，此属性才有效，返回的数据的格式取决于是使用哪种读取方法来执行读取操作的。
				img.src = reader.result;
			}
			//读取文件内容，结果用data:url的字符串形式表示  bese64编码
			reader.readAsDataURL(file);
			//将图片上传到后台
			uploadImg(file);
		}

		//异步上传图片
		function uploadImg(file) {
			let formData = new FormData();
			formData.append("file", file);
			$.ajax({
				url : "editEmpPhoto",
				type : "POST",
				data : formData,
				contentType : false,//告诉jQuery不要去设置Content-Type请求头
				processData : false,//告诉jQuery不要去处理发送的数据
				success : function(res) {
					if (res.code === 200) {
						console.log(res.msg);
					}
				}
			});
		}

		//输入出生日期得出年龄
		$("input[name=empBirthday]").bind('input porpertychange', function() {
			let birthDate = $("input[name=empBirthday]").val();
			let birthYear = new Date(birthDate).getFullYear();
			let currentYear = new Date().getFullYear();
			$("input[name=empAge]").val(currentYear - birthYear);
		});

		//修改员工信息
		$("#emp_info_form").submit(function() {
			let empUserName = $("#user_name").text();
			$.ajax({
				url : "updateStaffInfo/" + empUserName,
				type : "PUT",
				data : $("#emp_info_form").serialize(),
				success : function(res) {
					if (res.code === 200) {
						alert("保存成功");
					}
				}
			});
			return false;
		});
	
		function getEmpWorkInfo(){
			$.get("getStaffId").then(function(res){
				if(res.code === 200){
					getWorkExperience(res.extend.id);
					wages_page(1,res.extend.id);
					rewards_page(1,res.extend.id);
				}
			});
		}	
		//获取员工作经历
		function getWorkExperience(id) {
			$.get("empWorkExperience", "id=" + id).then(
					function(res) {
						let workInfo = res.extend.WorkExperience;
						$.each(workInfo, function(index, items) {
							let id = $("<td></td>").append(index + 1);
							let workCompany = $("<td></td>").append(
									items.workCompany);
							let dept = $("<td></td>").append(items.dept);
							let position = $("<td></td>")
									.append(items.position);
							let startTime = $("<td></td>").append(
									items.startTime);
							let endTime = $("<td></td>").append(items.endTime);
							let editBtn = $("<button></button>").addClass(
									"btn btn-primary btn-sm edit_btn").append(
									$("<span></span>")).addClass(
									"glyphicon glyphicon-pencil").append("编辑");
							editBtn.attr("edit_id", items.id);
							let delBtn = $("<button></button>").addClass(
									"btn btn-danger btn-sm del_btn").append(
									$("<span></span>")).addClass(
									"glyphicon glyphicon-trash").append("删除");
							delBtn.attr("del_id", items.id);
							let btn = $("<td></td>").append(editBtn)
									.append(" ").append(delBtn);
							$("<tr></tr>").append(id).append(workCompany)
									.append(dept).append(position).append(
											startTime).append(endTime).append(
											btn).appendTo(
											"#work_experience tbody");
						});
					});
		}
		
		//打开新增工作经历模态框
		$("#add_work_btn").click(function() {
			//清空表单数据
			$("#add_work_modal form")[0].reset();
			$("input[name=empId]").val($("#emp_id").val());
			$("#add_work_modal").modal({
				backdrop : "static"
			});
		});
		
		//新增工作经历
		$("#add_work_form").submit(function(){
			$.post("insertWorkExperience",$("#add_work_form").serialize())
			.then(function(res){
				if(res.code === 200){
					$("#add_work_modal").modal("hide");
					window.location.reload();
				}
			});
			return false;
		});
		
		//回显数据
		function getEmpInfoById(id){
			$.get("getWorkInfo","id="+id).then(function(res){
				if(res.code === 200){
					let staffInfo = res.extend.staffInfo;
					$("#edit_work_form input[name=workCompany]").val(staffInfo.workCompany);
					$("#edit_work_form input[name=dept]").val(staffInfo.dept);
					$("#edit_work_form input[name=position]").val(staffInfo.position);
					$("#edit_work_form input[name=startTime]").val(staffInfo.startTime);
					$("#edit_work_form input[name=endTime]").val(staffInfo.endTime);
				}
			});
		}
		
		//打开编辑模态框
		$(document).on("click",".edit_btn",function(){
			$("#edit_work_modal form")[0].reset();
			getEmpInfoById($(this).attr("edit_id"));
			//将id传递给修改按钮
			$("#edit_work_btn").attr("edit_btn_id",
					$(this).attr("edit_id"));
			$("#edit_work_modal").modal({
				backdrop : "static"
			});
		});
		
		//编辑工作经历
		$("#edit_work_btn").click(function(){
			$.ajax({
				url:"editStaffWorkInfo/"+$(this).attr("edit_btn_id"),
				data:$("#edit_work_form").serialize(),
				type:"PUT",
				success:function(res){
					if(res.code === 200){
						$("#edit_work_modal").modal("hide");
						window.location.reload();
					}
				}
			});
		});
		
		//删除工作经历数据
		$(document).on("click", ".del_btn", function() {
			let id = $(this).parents("tr").find("td:eq(0)").text();
			if (confirm("确认删除【" + id + "】号信息吗?")) {
				$.ajax({
					url : "deleteStaffWorkInfo/" + $(this).attr("del_id"),
					type : "DELETE",
					success : function() {
						window.location.reload();
					}
				});
			}
		});
		
		
		
		//分页显示员工工资记录
		function wages_page(pageNum){
			$.get("getEmpWages", "pageNumber=" + pageNum+"&"+"id="+$("#emp_id").val()).then(
					function(res) {
						//1.解析显示员工信息
						build_informations_table(res);
						//2.解析显示分页信息
						build_page_info(res,"#page_info_area");
						//3.解析显示分页条信息
						build_page_nav(res);
					});
		}
		
		//解析显示工资记录信息
		function build_informations_table(res){
			$("#payroll_records tbody").empty();
			let wagesInfo = res.extend.pageInfo.list;
			$.each(wagesInfo,function(index,items){
				let id = $("<td></td>").append(index+1);
				let time = $("<td></td>").append(items.years+"年"+items.months+"月");
				let monthlyWages = $("<td></td>").append(items.monthlyWages+".00");
				let performanceRoyalty = $("<td></td>").append(items.performanceRoyalty+".00");
				let deduct = $("<td></td>").append(items.deduct);
				if (deduct.text() != "") {
					deduct = $("<td></td>").append(items.deduct + ".00");
				}
				let realPay = $("<td></td>").append(items.realPay + ".00");
				$("<tr></tr>").append(id).append(time).append(monthlyWages).append(performanceRoyalty)
				.append(deduct).append(realPay).appendTo("#payroll_records tbody");
			});
		}
		
		//解析显示工资记录分页条信息
		function build_page_nav(res){
			$("#page_nav_area").empty();
			let ul = $("<ul></ul>").addClass("pagination navbar-right");
			//上一页
			let previous = $("<li></li>")
					.append($("<a></a>").append("&laquo;"));
			//判断是否还有上一页，没有就将链接禁用
			if (res.extend.pageInfo.hasPreviousPage === false) {
				previous.addClass("disabled");
			} else {
				previous.click(function() {
					wages_page(res.extend.pageInfo.pageNum - 1);
				});
			}
			ul.append(previous);

			//页码
			let navigatepageNums = res.extend.pageInfo.navigatepageNums;
			$.each(navigatepageNums, function(index, items) {
				let pageNumber = $("<li></li>").append(
						$("<a></a>").append(items));
				//判断当前页码是否等于分页条的页码
				if (res.extend.pageInfo.pageNum === items) {
					//给页码添加高亮
					pageNumber.addClass("active");
				}
				//给页码添加点击事件
				pageNumber.click(function() {
					wages_page(items);
				});
				ul.append(pageNumber);
			});

			//下一页
			let next = $("<li></li>").append($("<a></a>").append("&raquo;"));
			//判断是否还有下一页，没有就将链接禁用
			if (res.extend.pageInfo.hasNextPage === false) {
				next.addClass("disabled");
			} else {
				next.click(function() {
					wages_page(res.extend.pageInfo.pageNum + 1);
				});
			}
			ul.append(next).appendTo("#page_nav_area");
		}
		
		//通用解析显示分页信息
		function build_page_info(res,ele){
			$(ele).empty();
			$(ele).append(
					"当前第" + res.extend.pageInfo.pageNum + "页,共"
							+ res.extend.pageInfo.pages + "页,总"
							+ res.extend.pageInfo.total + "条记录");
		}
		
		//分页显示员工奖惩记录
		function rewards_page(pageNum){
			$.get("staffRewards", "pageNumber=" + pageNum+"&"+"id="+$("#emp_id").val()).then(
					function(res) {
						//1.解析显示员工信息
						build_rewards_table(res);
						//2.解析显示分页信息
						build_page_info(res,"#info_area");
						//3.解析显示分页条信息
						build_rewards_nav(res);
					});
		}
		
		//解析显示奖惩记录信息
		function build_rewards_table(res){
			$("#rewards_records tbody").empty();
			let rewards = res.extend.pageInfo.list;
			$.each(rewards, function(index, items) {
				let id = $("<td></td>").append(index + 1);
				let rewardsType = $("<td></td>").append(
						items.rewardsTypeId === 22 ? "迟到" : "早退");
				let rewardsTime = $("<td></td>").append(items.rewardsTime);
				let approver = $("<td></td>").append(items.approver);
				$("<tr></tr>").append(id).append(rewardsType).append(
						rewardsTime).append(approver).appendTo(
						"#rewards_records tbody");
			});
		}
		
		//解析显示奖惩记录分页条信息
		function build_rewards_nav(res){
			$("#nav_area").empty();
			let ul = $("<ul></ul>").addClass("pagination navbar-right");
			//上一页
			let previous = $("<li></li>")
					.append($("<a></a>").append("&laquo;"));
			//判断是否还有上一页，没有就将链接禁用
			if (res.extend.pageInfo.hasPreviousPage === false) {
				previous.addClass("disabled");
			} else {
				previous.click(function() {
					rewards_page(res.extend.pageInfo.pageNum - 1);
				});
			}
			ul.append(previous);

			//页码
			let navigatepageNums = res.extend.pageInfo.navigatepageNums;
			$.each(navigatepageNums, function(index, items) {
				let pageNumber = $("<li></li>").append(
						$("<a></a>").append(items));
				//判断当前页码是否等于分页条的页码
				if (res.extend.pageInfo.pageNum === items) {
					//给页码添加高亮
					pageNumber.addClass("active");
				}
				//给页码添加点击事件
				pageNumber.click(function() {
					rewards_page(items);
				});
				ul.append(pageNumber);
			});

			//下一页
			let next = $("<li></li>").append($("<a></a>").append("&raquo;"));
			//判断是否还有下一页，没有就将链接禁用
			if (res.extend.pageInfo.hasNextPage === false) {
				next.addClass("disabled");
			} else {
				next.click(function() {
					rewards_page(res.extend.pageInfo.pageNum + 1);
				});
			}
			ul.append(next).appendTo("#nav_area");
		}
	</script>
</body>

</html>